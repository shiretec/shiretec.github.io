import{v as l,j as e,m as r,D,a5 as L,a6 as z,a7 as k,a8 as q,q as E,d as F,b as j,w as I,f as Q,e as A,g as B,B as f,y as H,C as O,x as _,R as M}from"./index-Ho_YSQMq.js";import{A as P,C as S,f as K}from"./confirmation-dialog-CJtWsT9t.js";const h=({className:a,...s})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:r("mx-auto flex w-full justify-center",a),...s});h.displayName="Pagination";const p=l.forwardRef(({className:a,...s},t)=>e.jsx("ul",{ref:t,className:r("flex flex-row items-center gap-1",a),...s}));p.displayName="PaginationContent";const o=l.forwardRef(({className:a,...s},t)=>e.jsx("li",{ref:t,className:r("",a),...s}));o.displayName="PaginationItem";const d=({className:a,isActive:s,size:t="icon",children:i,href:n,...c})=>e.jsx(D,{to:n,"aria-current":s?"page":void 0,className:r(L({variant:s?"outline":"ghost",size:t}),a),...c,children:i});d.displayName="PaginationLink";const y=({className:a,...s})=>e.jsxs(d,{"aria-label":"Go to previous page",size:"default",className:r("gap-1 pl-2.5",a),...s,children:[e.jsx(z,{className:"size-4"}),e.jsx("span",{children:"Previous"})]});y.displayName="PaginationPrevious";const N=({className:a,...s})=>e.jsxs(d,{"aria-label":"Go to next page",size:"default",className:r("gap-1 pr-2.5",a),...s,children:[e.jsx("span",{children:"Next"}),e.jsx(k,{className:"size-4"})]});N.displayName="PaginationNext";const u=({className:a,...s})=>e.jsxs("span",{"aria-hidden":!0,className:r("flex h-9 w-9 items-center justify-center",a),...s,children:[e.jsx(q,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});u.displayName="PaginationEllipsis";const $=({totalPages:a,currentPage:s,rootUrl:t})=>{const i=n=>`${t}?page=${n}`;return e.jsx(h,{className:"justify-end py-8",children:e.jsxs(p,{children:[s>1&&e.jsx(o,{children:e.jsx(y,{href:i(s-1)})}),s>2&&e.jsx(o,{children:e.jsx(u,{})}),s>1&&e.jsx(o,{children:e.jsx(d,{href:i(s-1),children:s-1})}),e.jsx(o,{className:"rounded-sm bg-gray-200",children:e.jsx(d,{href:i(s),children:s})}),a>s&&e.jsx(o,{children:e.jsx(d,{href:i(s+1),children:s+1})}),a>s+1&&e.jsx(o,{children:e.jsx(u,{})}),s<a&&e.jsx(o,{children:e.jsx(N,{href:i(a)})})]})})},b=l.forwardRef(({className:a,...s},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:r("w-full caption-bottom text-sm",a),...s})}));b.displayName="Table";const g=l.forwardRef(({className:a,...s},t)=>e.jsx("thead",{ref:t,className:r("[&_tr]:border-b",a),...s}));g.displayName="TableHeader";const v=l.forwardRef(({className:a,...s},t)=>e.jsx("tbody",{ref:t,className:r("[&_tr:last-child]:border-0",a),...s}));v.displayName="TableBody";const G=l.forwardRef(({className:a,...s},t)=>e.jsx("tfoot",{ref:t,className:r("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s}));G.displayName="TableFooter";const x=l.forwardRef(({className:a,...s},t)=>e.jsx("tr",{ref:t,className:r("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s}));x.displayName="TableRow";const w=l.forwardRef(({className:a,...s},t)=>e.jsx("th",{ref:t,className:r("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s}));w.displayName="TableHead";const T=l.forwardRef(({className:a,...s},t)=>e.jsx("td",{ref:t,className:r("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s}));T.displayName="TableCell";const V=l.forwardRef(({className:a,...s},t)=>e.jsx("caption",{ref:t,className:r("mt-4 text-sm text-muted-foreground",a),...s}));V.displayName="TableCaption";const X=({data:a,columns:s,pagination:t})=>a!=null&&a.length?e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsx(g,{children:e.jsx(x,{children:s.map((i,n)=>e.jsx(w,{children:i.title},i.title+n))})}),e.jsx(v,{children:a.map((i,n)=>e.jsx(x,{children:s.map(({Cell:c,field:R,title:C},U)=>e.jsx(T,{children:c?e.jsx(c,{entry:i}):`${i[R]}`},C+U))},(i==null?void 0:i.id)||n))})]}),t&&e.jsx($,{...t})]}):e.jsxs("div",{className:"flex h-80 flex-col items-center justify-center bg-white text-gray-500",children:[e.jsx(P,{className:"size-16"}),e.jsx("h4",{children:"No Entries Found"})]}),J=()=>j.get("/users"),m=()=>E({queryKey:["users"],queryFn:J}),W=({queryConfig:a}={})=>F({...m(),...a}),Y=({userId:a})=>j.delete(`/users/${a}`),Z=({mutationConfig:a}={})=>{const s=I(),{onSuccess:t,...i}=a||{};return Q({onSuccess:(...n)=>{s.invalidateQueries({queryKey:m().queryKey}),t==null||t(...n)},...i,mutationFn:Y})},ee=({id:a})=>{var n;const s=A(),{addNotification:t}=B(),i=Z({mutationConfig:{onSuccess:()=>{t({type:"success",title:"User Deleted"})}}});return((n=s.data)==null?void 0:n.id)===a?null:e.jsx(S,{icon:"danger",title:"Delete User",body:"Are you sure you want to delete this user?",triggerButton:e.jsx(f,{variant:"destructive",children:"Delete"}),confirmButton:e.jsx(f,{isLoading:i.isPending,type:"button",variant:"destructive",onClick:()=>i.mutate({userId:a}),children:"Delete User"})})},se=()=>{var t;const a=W();if(a.isLoading)return e.jsx("div",{className:"flex h-48 w-full items-center justify-center",children:e.jsx(H,{size:"lg"})});const s=(t=a.data)==null?void 0:t.data;return s?e.jsx(X,{data:s,columns:[{title:"First Name",field:"firstName"},{title:"Last Name",field:"lastName"},{title:"Email",field:"email"},{title:"Role",field:"role"},{title:"Created At",field:"createdAt",Cell({entry:{createdAt:i}}){return e.jsx("span",{children:K(i)})}},{title:"",field:"id",Cell({entry:{id:i}}){return e.jsx(ee,{id:i})}}]}):null},ae=a=>async()=>{const s=m();return a.getQueryData(s.queryKey)??await a.fetchQuery(s)},te=()=>e.jsx(O,{title:"Users",children:e.jsx(_,{forbiddenFallback:e.jsx("div",{children:"Only admin can view this."}),allowedRoles:[M.ADMIN],children:e.jsx(se,{})})}),ne=Object.freeze(Object.defineProperty({__proto__:null,clientLoader:ae,default:te},Symbol.toStringTag,{value:"Module"}));export{X as T,ne as u};
