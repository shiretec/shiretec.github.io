import{j as e,l as g,m as p,n as h,o as m,k as j,r as b,I as u,S as f,L as y,B as N,p as v,s as x,d as T,q as w,b as F,t as L,v as R,A as I}from"./index-BWJUiY3D.js";const k=a=>{const{label:o,options:n,error:r,className:i,defaultValue:c,registration:l}=a;return e.jsx(g,{label:o,error:r,children:e.jsx("select",{className:p("mt-1 block w-full rounded-md border-gray-600 py-2 pl-3 pr-10 text-base focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",i),defaultValue:c,...l,children:n.map(({label:s,value:t})=>e.jsx("option",{value:t,children:s},s==null?void 0:s.toString()))})})},q=({onSuccess:a,chooseTeam:o,setChooseTeam:n,teams:r})=>{const i=h({onSuccess:a}),[c]=m(),l=c.get("redirectTo");return e.jsxs("div",{children:[e.jsx(j,{onSubmit:s=>{i.mutate(s)},schema:b,options:{shouldUnregister:!0},children:({register:s,formState:t})=>e.jsxs(e.Fragment,{children:[e.jsx(u,{type:"text",label:"First Name",error:t.errors.firstName,registration:s("firstName")}),e.jsx(u,{type:"text",label:"Last Name",error:t.errors.lastName,registration:s("lastName")}),e.jsx(u,{type:"email",label:"Email Address",error:t.errors.email,registration:s("email")}),e.jsx(u,{type:"password",label:"Password",error:t.errors.password,registration:s("password")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{checked:o,onCheckedChange:n,className:`${o?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2`,id:"choose-team"}),e.jsx(y,{htmlFor:"airplane-mode",children:"Join Existing Team"})]}),o&&r?e.jsx(k,{label:"Team",error:t.errors.teamId,registration:s("teamId"),options:r==null?void 0:r.map(d=>({label:d.name,value:d.id}))}):e.jsx(u,{type:"text",label:"Team Name",error:t.errors.teamName,registration:s("teamName")}),e.jsx("div",{children:e.jsx(N,{isLoading:i.isPending,type:"submit",className:"w-full",children:"Register"})})]})}),e.jsx("div",{className:"mt-2 flex items-center justify-end",children:e.jsx("div",{className:"text-sm",children:e.jsx(v,{to:x.auth.login.getHref(l),className:"font-medium text-blue-600 hover:text-blue-500",children:"Log In"})})})]})},C=()=>F.get("/teams"),P=()=>w({queryKey:["teams"],queryFn:()=>C()}),E=({queryConfig:a={}}={})=>T({...P(),...a}),A=()=>{var l;const a=L(),[o]=m(),n=o.get("redirectTo"),[r,i]=R.useState(!1),c=E({queryConfig:{enabled:r}});return e.jsx(I,{title:"Register your account",children:e.jsx(q,{onSuccess:()=>{a(`${n?`${n}`:x.app.dashboard.getHref()}`,{replace:!0})},chooseTeam:r,setChooseTeam:()=>i(!r),teams:(l=c.data)==null?void 0:l.data})})};export{A as default};
